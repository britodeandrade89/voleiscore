<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    
    <link rel="manifest" href="manifest.json">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Placar Touch">
    <meta name="application-name" content="Placar Touch">
    <meta name="theme-color" content="#1c1c1c">
    
    <title>Placar Touch</title>
    <style>
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; 
            font-family: 'Segoe UI', Arial, sans-serif; background-color: #1c1c1c; 
            -webkit-user-select: none; user-select: none; 
        }

        #splash-screen { 
            display: flex; flex-direction: column; justify-content: center; align-items: center; 
            width: 100%; height: 100%; background-color: #1c1c1c; 
            transition: opacity 0.5s ease-out; 
        }

        /* --- NOVO ESTILO DO LOGO BOLA DE VÔLEI --- */
        .logo-volleyball {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background-color: white; /* Cor da bola */
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3); /* Um brilho suave */
        }

        .logo-volleyball::before,
        .logo-volleyball::after {
            content: '';
            position: absolute;
            background-color: rgba(0, 0, 0, 0.2); /* Linhas da bola */
            border-radius: 50%;
        }

        .logo-volleyball::before { /* Linha horizontal */
            width: 80%;
            height: 5px;
            top: calc(50% - 2.5px);
        }

        .logo-volleyball::after { /* Linhas curvas */
            width: 80%;
            height: 80%;
            border-top: 5px solid rgba(0, 0, 0, 0.2);
            border-bottom: 5px solid rgba(0, 0, 0, 0.2);
            transform: rotate(45deg);
            box-sizing: border-box; /* Garante que o padding/border não aumente o tamanho */
        }

        .app-name { 
            font-size: 5vh; color: #fff; margin-top: 20px; font-weight: bold; 
        }

        .placar-container { 
            display: flex; flex-direction: column; width: 100vw; height: 100vh; 
        }
        
        .hidden { display: none !important; }

        .timer { 
            text-align: center; font-size: 5vh; font-weight: bold; color: #000; 
            padding: 10px 0; background-color: #f0f0f0; border-bottom: 2px solid #ccc; 
        }

        .times-container { display: flex; flex-grow: 1; }

        .time { 
            flex: 1; display: flex; justify-content: center; align-items: center; 
            font-size: 40vh; font-weight: bold; color: white; cursor: pointer; 
            transition: transform 0.1s ease; 
        }
        
        .time:active { transform: scale(0.98); }

        #time-vermelho { background-color: #e74c3c; }
        #time-preto { background-color: #000000; }
    </style>
</head>
<body>

<div id="splash-screen">
    <div class="logo-volleyball"></div> <div class="app-name">Placar Touch</div>
</div>

<div id="placar-container" class="placar-container hidden">
    <div id="timer" class="timer">00:00:00</div>
    <div class="times-container">
        <div id="time-vermelho" class="time">0</div>
        <div id="time-preto" class="time">0</div>
    </div>
</div>

<script>
    window.addEventListener('load', () => {
        const splash = document.getElementById('splash-screen');
        const placar = document.getElementById('placar-container');
        setTimeout(() => {
            splash.style.opacity = 0;
            setTimeout(() => {
                splash.classList.add('hidden');
                placar.classList.remove('hidden');
            }, 500);
        }, 2000);
    });

    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js')
            .then(reg => console.log('Service Worker registrado com sucesso!', reg))
            .catch(err => console.error('Falha ao registrar Service Worker:', err));
    }
    
    const timeVermelhoEl = document.getElementById('time-vermelho');
    const timePretoEl = document.getElementById('time-preto');
    const timerEl = document.getElementById('timer');
    let pontosVermelho = 0, pontosPreto = 0, segundosTotais = 0;
    let timerInterval, partidaIniciada = false, touchStartY = 0, touchEndY = 0;
    function iniciarTimer() { if (!partidaIniciada) { partidaIniciada = true; timerInterval = setInterval(() => { segundosTotais++; let h = String(Math.floor(segundosTotais/3600)).padStart(2,'0'), m = String(Math.floor((segundosTotais%3600)/60)).padStart(2,'0'), s = String(segundosTotais%60).padStart(2,'0'); timerEl.textContent = `${h}:${m}:${s}`; }, 1000); } }
    function atualizarPlacar() { timeVermelhoEl.textContent = pontosVermelho; timePretoEl.textContent = pontosPreto; }
    timeVermelhoEl.addEventListener('touchstart', e => { iniciarTimer(); touchStartY = e.changedTouches[0].screenY; }, false);
    timeVermelhoEl.addEventListener('touchend', e => { touchEndY = e.changedTouches[0].screenY; handleSwipe('vermelho'); }, false);
    timePretoEl.addEventListener('touchstart', e => { iniciarTimer(); touchStartY = e.changedTouches[0].screenY; }, false);
    timePretoEl.addEventListener('touchend', e => { touchEndY = e.changedTouches[0].screenY; handleSwipe('preto'); }, false);
    function handleSwipe(time) { const dist = touchEndY - touchStartY; if (dist < -50) { if (time === 'vermelho') pontosVermelho++; else pontosPreto++; } else if (dist > 50) { if (time === 'vermelho' && pontosVermelho > 0) pontosVermelho--; if (time === 'preto' && pontosPreto > 0) pontosPreto--; } else { if (time === 'vermelho') pontosVermelho++; else pontosPreto++; } atualizarPlacar(); }
</script>

</body>
</html>
